<% content_for :header, pre_order_button(class: "hidden-xs") %>

<div class="row">
  <div class="col-sm-6">
    <%= form_for @photo, html: { id: "preview-photo", class: "clearfix" } do |f| %>
      <%= f.hidden_field :creator_email %>
      <%= f.hidden_field :image_cache %>
      <%= f.hidden_field :color, value: "red" %>

      <h2>Pick A Color</h2>
      <button type="button" class="selector" data-color="red"></button>
      <button type="button" class="selector" data-color="gold"></button>
      <button type="button" class="selector" data-color="green"></button>
      <button type="button" class="selector" data-color="blue"></button>
      <button type="button" class="selector" data-color="purple"></button>
      <button type="button" class="selector" data-color="grey"></button>

      <%= f.submit "Save My Photo" %>
      <div class="separator">- OR -</div>
      <%= link_to "Start Over", root_path, class: "button" %>
    <% end %>
  </div>

  <div class="col-sm-6">
    <div id="photo-preview" class="photo" style="background-image: url(<%= @photo.image_cache_url %>)">
      <%= image_tag "overlay_red", class: "overlay red" %>
      <%= image_tag "overlay_gold", class: "overlay gold" %>
      <%= image_tag "overlay_green", class: "overlay green" %>
      <%= image_tag "overlay_blue", class: "overlay blue" %>
      <%= image_tag "overlay_purple", class: "overlay purple" %>
      <%= image_tag "overlay_grey", class: "overlay grey" %>
    </div>
  </div>
</div>

<script type="text/javascript">
  $("button.selector").click(function() {
    var color = $(this).data("color");
    $("img.overlay").not("." + color).css("opacity", 0);
    $("img.overlay." + color).css("opacity", 1);
    $("input#photo_color").val(color);
  });
</script>